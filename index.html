<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Mon 1er jeu Phaser</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js">
    </script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body>
    <script src="plaines.js"></script>
    <script src="village.js"></script>
    <script src="gestionUI.js"></script>
    <script type="text/javascript">




        class menu extends Phaser.Scene {

            constructor() {
                super("menu");
            }


            preload() {

                this.load.spritesheet('perso', 'assets/sprites/Sprite_fish_01.png',
                    { frameWidth: 64, frameHeight: 62 });
                this.load.image('fondmenu', 'assets/UI/menu.png');
                this.load.image('bouttonStart', 'assets/UI/boutonS.png');
                this.load.image('bouttonQ', 'assets/UI/boutonQ.png');
                this.load.image("place", "assets/tilesetPlaceholder.png");
                this.load.tilemapTiledJSON("carte", "assets/maps/map_village.json");

            }




            create() {

                this.powerup2=false;
                this.powerup3=false;
                this.vieActuelle=2;
                this.vieMax=2;


                this.fond = this.add.image(640, 720 / 2, 'fondmenu');
                this.fond.setScale(0.3)
                this.buttonS = this.add.sprite(660, 360 + 20, 'bouttonStart').setInteractive();
                this.buttonS.setScale(0.28)
                this.buttonQ = this.add.sprite(660, 500, 'bouttonQ').setInteractive();
                this.buttonQ.setScale(0.28)

                console.log(this.powerup2)
                this.buttonS.on('pointerdown', function () {
                    this.scene.scene.start('village',{powerup2:this.scene.powerup2,vieA:this.scene.vieActuelle,vieM:this.scene.vieMax});
                });

                this.buttonQ.on('pointerup', function () {
                    this.scene.scene.start('village',{powerup:this.powerup2});
                });



            }


            update() {



            }




        }


        



        var config = {
            type: Phaser.AUTO,
            width: 1280, height: 720,
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: false,
                    debug: true
                }
            },

            scene: [menu, village, plaines]
        };

        new Phaser.Game(config);








    </script>
</body>

</html>